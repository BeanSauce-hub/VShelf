<!doctype html>
<html lang="zh-CN">
<meta charset="utf-8" />
<title>Matrix</title>
<style>
  html,body{margin:0;height:100%;background:#000;overflow:hidden}
  #c{position:fixed;inset:0;display:block}
</style>
<canvas id="c"></canvas>
<script>
(() => {
  const c = document.getElementById('c');
  const x = c.getContext('2d');
  const CH = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const FS = 16;                  // 字号(px)
  const COLOR = "rgba(0,255,102,0.3)"; // 半透明绿色

  let dpr = 1, cols = 0, drops = [];

  function resize(){
    dpr = Math.max(1, window.devicePixelRatio || 1);
    const w = innerWidth, h = innerHeight;
    c.width = Math.floor(w * dpr);
    c.height = Math.floor(h * dpr);
    x.setTransform(dpr,0,0,dpr,0,0);
    x.font = `${FS}px monospace`;
    x.textBaseline = "top";
    cols = Math.floor(w / FS);
    drops = Array(cols).fill(0);
  }

  function draw(){
    x.fillStyle = "rgba(0,0,0,0.07)";
    x.fillRect(0,0,innerWidth,innerHeight);

    x.fillStyle = COLOR;
    for(let i=0;i<cols;i++){
      const ch = CH[Math.floor(Math.random()*CH.length)];
      const xPos = i * FS;
      const yPos = drops[i] * FS;
      x.fillText(ch, xPos, yPos);

      if (yPos > innerHeight && Math.random() > 0.975) drops[i] = 0;
      else drops[i]++;
    }
    requestAnimationFrame(draw);
  }

  addEventListener('resize', resize);
  resize(); draw();
})();
</script>
